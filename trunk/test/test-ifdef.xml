<project xmlns:c="antlib:net.haefelingerit.flaka" xmlns:foo="foobar">
  <macrodef name="foobar">
    <sequential>
    </sequential>
  </macrodef>
  
  <macrodef name="foo">
    <sequential>
    </sequential>
  </macrodef>
  <taskdef name="ifdef" classname="net.haefelingerit.flaka.Break" />

  <c:unset var="4711" />
  <c:ifdef macro="foo" task="bar" invert="true">
     <c:set var="4711" />
  </c:ifdef>
  <fail message="**error: bar is not defined here (test failed) " unless="4711" />

  <taskdef name="bar" classname="net.haefelingerit.flaka.Break" />
  <c:ifdef macro="foo" task="bar" invert="true">
    <fail message="foo and bar are defined -> invert not working" />
  </c:ifdef>

  <c:ifdef property="foobar" >
    <fail message="**error: foobar is not defined here []" />
  </c:ifdef>

  <c:unset var="4711" />
  <c:ifdef taskormacro=" :foobar:ifdef: " ifs=":">
    <c:set var="4711" />
  </c:ifdef>
  <fail message="**error: foobar and ifdef exists (test failed) " unless="4711" />

  <c:unset var="4711" />
  <c:ifdef taskormacro=" foobar:ifdef " ifs=":">
    <c:set var="4711" />
  </c:ifdef>
  <fail message="**error: foobar and ifdef exists (test failed) " unless="4711" />
  

  <c:ifdef />

  <c:ifdef property="foobar" />


  <c:set var="foobar" />
  
  <c:ifdef property="foobar" >
    <c:set var="4711" />
  </c:ifdef>
  <fail message="**error: then not executed .. " unless="4711" />

 
  <c:unset var="4711" />
  
  <c:ifdef macro="foobar" >
    <c:set var="4711" />
  </c:ifdef>
  <fail message="**error: macro foobar exists (test failed) " unless="4711" />

  <c:unset var="4711" />

 
  <c:ifdef task="ifdef" >
    <c:set var="4711" />
  </c:ifdef>
  <fail message="**error: task ifdef exists (test failed) " unless="4711" />

  <c:unset var="4711" />

  <c:ifdef taskormacro="ifdef" >
    <c:set var="4711" />
  </c:ifdef>
  <fail message="**error: task ifdef exists (test failed) " unless="4711" />

 <c:unset var="4711" />

  <c:ifdef taskormacro="foobar" >
    <c:set var="4711" />
  </c:ifdef>
  <fail message="**error: macro foobar exists (test failed) " unless="4711" />

  <c:unset var="4711" />
  
  <c:ifdef taskormacro=" foobar ifdef" >
    <c:set var="4711" />
  </c:ifdef>
  <fail message="**error: macro foobar and task ifdef exists (test failed) " unless="4711" />

  <c:ifdef taskormacro=" foobar x-ifdef" >
    <fail message="task x-ifdef does not exist .." />
  </c:ifdef>
  
  <c:unset var="4711" />

  <c:ifdef task="ifdef" macro="foobar" >
    <c:set var="4711" />
  </c:ifdef>
  <fail message="**error: macro foobar and task ifdef exists (test failed) " unless="4711" />

  <c:ifdef task="x-ifdef" macro="foobar" >
    <fail message="task x-ifdef does not exist .." />
  </c:ifdef>
  
  <c:ifdef task="ifdef" macro="x-foobar" >
    <fail message="macro x-foobar does not exist .." />
  </c:ifdef>

  
  

</project>
