<project xmlns:c="antlib:it.haefelinger.flaka">

	<c:inline-properties>
    cvs.tag = v-uat_3_20_500
    g.g1    = g.g1
    g.g3    = g.g3
  </c:inline-properties>

	<macrodef name="switch-test">
		<attribute name="value" />
		<sequential>
			<c:switch02 value="@{value}" debug="true">
				<re expr="v-(?:([^\d][^_]*)_)?(\d.*)" var="g">
					<c:echo>
					  g.p     = #{g.p}
					  g.n     = #{g.n}
					  g.start = #{g.start}
					  g.end   = #{g.end}
					  g       = #{g}
					  g[1]    = #{g[1]}
					  g[2]    = #{g[2]}
					</c:echo>
				</re>
				<glob expr=" 4**1 " var="m">
					<c:echo>
					  g.p     = #{m.p}
					  g.n     = #{m.n}
					  g.start = #{m.start}
					  g.end   = #{m.end}
					  g       = #{m}
					</c:echo>
				</glob>
			</c:switch02>
		</sequential>
	</macrodef>


	<switch-test value="${cvs.tag}" />
	<switch-test value=" 4711 " />

	<c:switch02 value="b" debug="true" comments="true">
		<cmp eq="b">
			<c:echo>
				identical
	    </c:echo>
		</cmp>
		<otherwise>
			<fail />
		</otherwise>
	</c:switch02>

	<c:switch02 value="b" debug="true" comments="true">
		<cmp lt="c">
			<c:echo>
	        lt
	      </c:echo>
		</cmp>
		<otherwise>
			<fail />
		</otherwise>
	</c:switch02>

	<c:switch02 value="b" debug="true" comments="true">
		<cmp gt="a">
			<c:echo>
	          gt
	        </c:echo>
		</cmp>
		<otherwise>
			<fail />
		</otherwise>
	</c:switch02>

	<!-- test opposite -->
	<c:switch02 value="b" debug="true" comments="true">
		<cmp gt="b">
			<fail />
		</cmp>
		<cmp lt="b">
			<fail />
		</cmp>
	</c:switch02>

	<c:switch02 value="b" debug="true" comments="true">
		<cmp eq="a">
			<fail />
		</cmp>
		<cmp lt="a">
			<fail />
		</cmp>
	</c:switch02>

	<c:switch02 value="b" debug="true" comments="true">
		<cmp eq="c">
			<fail />
		</cmp>
		<cmp gt="c">
			<fail />
		</cmp>
	</c:switch02>

	<!-- repeat tests ignoring case -->
	<c:switch02 value="B" debug="true" comments="true" ignorecase="true">
		<cmp eq="b">
			<c:echo>
	        identical
	      </c:echo>
		</cmp>
		<otherwise>
			<fail />
		</otherwise>
	</c:switch02>

	<c:switch02 value="B" debug="true" comments="true" ignorecase="true">
		<cmp gt="a">
			<c:echo>
	          gt
	        </c:echo>
		</cmp>
		<otherwise>
			<fail />
		</otherwise>
	</c:switch02>

	<c:switch02 value="B" debug="true" comments="true" ignorecase="true">
		<cmp lt="c">
			<c:echo>
	            lt
	          </c:echo>
		</cmp>
		<otherwise>
			<fail />
		</otherwise>
	</c:switch02>

	<!-- test opposite -->
	<c:switch02 value="B" debug="true" comments="true" ignorecase="true">
		<cmp lt="b">
			<fail />
		</cmp>
		<cmp gt="b">
			<fail />
		</cmp>
	</c:switch02>

	<c:switch02 value="B" debug="true" comments="true" ignorecase="true">
		<cmp eq="a">
			<fail />
		</cmp>
		<cmp lt="a">
			<fail />
		</cmp>
	</c:switch02>

	<c:switch02 value="B" debug="true" comments="true" ignorecase="true">
		<cmp eq="c">
			<fail />
		</cmp>
		<cmp gt="c">
			<fail />
		</cmp>
	</c:switch02>

	<!-- :end: -->

	<c:switch02 value="a" debug="true" comments="true">
		<cmp eq="b" lt="b">
			<c:echo>
	        identical or less then
	      </c:echo>
		</cmp>
		<otherwise>
			<fail />
		</otherwise>
	</c:switch02>
</project>